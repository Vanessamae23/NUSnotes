<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Infinite List</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-interactiveBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-translucentGray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="78d28736-a0d4-445e-b913-988dce1a3d48" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">♾️</span></div><h1 class="page-title">Infinite List</h1><p class="page-description"></p></header><div class="page-body"><p id="f4a94357-c289-4829-8109-627858a021c1" class="">Lazy Infinite List from lab7</p><pre id="efde074d-f49f-450a-a90d-81c9b4b35150" class="code code-wrap"><code>package cs2030s.fp;

public class InfiniteList&lt;T&gt; {

    //A Maybe that is wrapped around Lazy to evaluate it later.
    private final Lazy&lt;Maybe&lt;T&gt;&gt; head;
    private final Lazy&lt;InfiniteList&lt;T&gt;&gt; tail;

    private static final InfiniteList&lt;?&gt; SENTINEL = new Sentinel();

    private static class Sentinel extends InfiniteList&lt;Object&gt; {
        private Sentinel() {
            super();
        }

        @Override
        public Object head() {
            throw new java.util.NoSuchElementException();
        }

        @Override
        public InfiniteList&lt;Object&gt; tail() {
            return sentinel();
        }

        @Override
        public InfiniteList&lt;Object&gt; limit(long n) {
            return sentinel();
        }

        @Override
        public InfiniteList&lt;Object&gt; takeWhile(BooleanCondition&lt;? super Object&gt; pred) {
            return sentinel();
        }

        @Override
        public &lt;U&gt; U reduce(U item, Combiner&lt;U, ? super Object, U&gt; acc) {
            return item;
        }

        @Override
        public long count() {
            return 0L;
        }

        @Override
        public List&lt;Object&gt; toList() {
            return List.of();
        }

        @Override
        public String toString() {
            return &quot;-&quot;;
        }

        @Override
        public &lt;R&gt; InfiniteList&lt;R&gt; map(Transformer&lt;? super Object, ? extends R&gt; transformer) {
            return sentinel();
        }

        @Override
        public InfiniteList&lt;Object&gt; filter(BooleanCondition&lt;? super Object&gt; pred) {
            return sentinel();
        }
    }


    private InfiniteList() {
        this.head = null;
        this.tail = null;
    }


    public static &lt;T&gt; InfiniteList&lt;T&gt; generate(Producer&lt;T&gt; producer) {
        // TODO -&gt; Do not use Lazy(value) because then there will be a value already
        return new InfiniteList&lt;&gt;(Lazy.of(() -&gt;
                Maybe.some(producer.produce())), Lazy.of(() -&gt; generate(producer)));
    }

    public static &lt;T&gt; InfiniteList&lt;T&gt; iterate(T seed, Transformer&lt;T, T&gt; next) {
        // TODO
        return new InfiniteList&lt;&gt;(seed, () -&gt; iterate(next.transform(seed), next));
    }

    private InfiniteList(T head, Producer&lt;InfiniteList&lt;T&gt;&gt; tail) {
        // TODO
        this.head = Lazy.of(Maybe.some(head));
        this.tail = Lazy.of(tail);
    }


    private InfiniteList(Lazy&lt;Maybe&lt;T&gt;&gt; head, Lazy&lt;InfiniteList&lt;T&gt;&gt; tail) {
        // TODO
        this.head = head;
        this.tail = tail;
    }


    public T head() {
        // TODO
        return this.head.get().orElseGet(() -&gt; {
            return this.tail.get().head();
        });
    }

    public InfiniteList&lt;T&gt; tail() {
        // TODO
        return this.head.get().map(x -&gt; this.tail.get()).orElseGet(() -&gt; this.tail.get().tail());
        //return this.head.get() == Maybe.none() ? this.tail.get().tail() : this.tail.get();
    }

    public &lt;R&gt; InfiniteList&lt;R&gt; map(Transformer&lt;? super T, ? extends R&gt; mapper) {
        // TODO
        return new InfiniteList&lt;&gt;(Lazy.&lt;Maybe&lt;R&gt;&gt;of(() -&gt;
                Maybe.some(mapper.transform(this.head()))),
                Lazy.of(() -&gt; this.tail().map(mapper)));
    }


    public InfiniteList&lt;T&gt; filter(BooleanCondition&lt;? super T&gt; predicate) {
        // TODO
        return new InfiniteList&lt;&gt;(Lazy.of(() -&gt; this.head.get()
                .filter(predicate)),
                Lazy.of(() -&gt; this.tail.get().filter(predicate)));
    }


    public static &lt;T&gt; InfiniteList&lt;T&gt; sentinel() {
        // TODO
        @SuppressWarnings(&quot;unchecked&quot;)
        InfiniteList&lt;T&gt; temp = (InfiniteList&lt;T&gt;) SENTINEL;
        return temp;
    }

    public InfiniteList&lt;T&gt; limit(long n) {
        // TODO
        return Maybe.of(new InfiniteList&lt;&gt;(this.head,
                Lazy.of(() -&gt; this.head.get().map(x -&gt; this.tail.get()
                        .limit(n - 1)).orElseGet(() -&gt; this.tail.get()
                        .limit(n))))).filter(y -&gt; n - 1 &gt;= 0).orElse(sentinel());
    }



    public InfiniteList&lt;T&gt; takeWhile(BooleanCondition&lt;? super T&gt; predicate) {
        // TODO
        Lazy&lt;Maybe&lt;T&gt;&gt; l = Lazy.of(() -&gt; this.head.get().filter(predicate));

        InfiniteList&lt;T&gt; t = new InfiniteList&lt;&gt;(Lazy.of(() -&gt; l.get()),
                Lazy.of(() -&gt; this.head.get().map(x -&gt; l.get()
                        .map(y -&gt; this.tail.get().takeWhile(predicate))
                        .orElse(sentinel())).orElseGet(() -&gt; this.tail.get().takeWhile(predicate))));

        return t;
    }


    public boolean isSentinel() {
        return this instanceof Sentinel;
    }


    public &lt;U&gt; U reduce(U identity, Combiner&lt;U, ? super T, U&gt; accumulator) {
        // TODO
        return this.head.get().map(x -&gt; accumulator
                        .combine(this.tail.get().reduce(identity, accumulator), x))
                .orElse(this.tail.get().reduce(identity, accumulator));
    }


    public long count() {
        // TODO
        return this.reduce(0L, (x, y) -&gt; x + 1L);
    }

 
    public List&lt;T&gt; toList() {
        // TODO
        List&lt;T&gt; l = new ArrayList&lt;T&gt;();

        return this.head.get().map(x -&gt; {
            l.add(x);
            l.addAll(this.tail.get().toList());
            return l;
        }).orElse(this.tail.get().toList());
    }

    @Override
    public String toString() {
        return &quot;[&quot; + this.head + &quot; &quot; + this.tail + &quot;]&quot;;
    }
}</code></pre><pre id="13735ead-0b69-4351-9353-b54884056e46" class="code code-wrap"><code>private Producer&lt;T&gt; head;
private Producer&lt;InfiniteList&lt;T&gt;&gt; tail;


public static &lt;T&gt; InfiniteList&lt;T&gt; generate(Producer&lt;T&gt; producer) {
    return new InfiniteList&lt;T&gt;(producer,
        () -&gt; generate(producer));
  }

public static &lt;T&gt; InfiniteList&lt;T&gt; iterate(T init, Transformer&lt;T, T&gt; next) {
    return new InfiniteList&lt;T&gt;(() -&gt; init,
      () -&gt; iterate(next.transform(init), next));
  }

InfiniteList&lt;Integer&gt; evens = InfiniteList.iterate(0, x -&gt; x + 2); // 0, 2, 4, 6, ...
InfiniteList&lt;Integer&gt; odds = evens.map(x -&gt; x + 1); // 1, 3, 5, ...
InfiniteList&lt;Integer&gt; altEvens = odds.map(x -&gt; x * 2); // 2, 6, 10, .. 
altEvens.head();</code></pre><div id="479f0ee8-2f0e-45e8-97f9-3ad81225cba3" class="column-list"><div id="c1442245-5f76-4cdc-b4d5-7ad3b561913c" style="width:50%" class="column"><figure id="4ddb6491-5634-49a0-93e1-a40526b3dced" class="image"><a href="Infinite%20List%2078d28736a0d4445eb913988dce1a3d48/Untitled.png"><img style="width:336px" src="Infinite%20List%2078d28736a0d4445eb913988dce1a3d48/Untitled.png"/></a></figure><p id="d1db6672-14a1-4499-a02f-de00aff7c432" class="">
</p></div><div id="d7beff0c-757b-4998-bdf4-65714287e7ba" style="width:50%" class="column"><ul id="633d153e-64bd-4f86-b1a6-a6a46dd00c9b" class="bulleted-list"><li style="list-style-type:disc"><code>evens</code> is an instance of <code>InfiniteList&lt;T&gt;</code>with two fields <code>head</code> and <code>tail</code> </li></ul><ul id="95d2d320-cb01-45b9-afa9-b1deaaf8c2a2" class="bulleted-list"><li style="list-style-type:disc">Each <code>head</code> and <code>tail</code> is pointing to a <code>Producer&lt;T&gt;</code></li></ul><ul id="a9149167-c361-415c-afa8-6233ca2f327d" class="bulleted-list"><li style="list-style-type:disc"> The two instances of <code>Producer&lt;T&gt;</code> capture the variable <code>init.</code> The tail additionally captures the variable <code>next</code>, which itself is an instance of <code>Transformer&lt;T,T&gt;.</code></li></ul></div></div><pre id="c17662be-d2a9-49af-aa92-8cb76f79ec04" class="code code-wrap"><code>public &lt;R&gt; InfiniteList&lt;R&gt; map(Transformer&lt;? super T, ? extends R&gt; mapper) {
  return new InfiniteList&lt;&gt;(
      () -&gt; mapper.transform(this.head()),
      () -&gt; this.tail().map(mapper));
}</code></pre><p id="00320a64-a897-4337-92d7-9c9080712040" class="">The above <code>map()</code>create a new list initialized with a new lambda expression that applies the given lambda expression <code>mapper</code> to the head and the tail.</p><figure class="block-color-red_background callout" style="white-space:pre-wrap;display:flex" id="24ac2702-214c-4ffb-9103-18810ed4aa34"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Only when we call <code>head()</code> will there be an evaluation of the lambda expression to obtain the results</div></figure><figure id="64d1a7a9-7c7f-44e9-bc5b-c37733b8a357" class="image"><a href="Infinite%20List%2078d28736a0d4445eb913988dce1a3d48/Untitled%201.png"><img style="width:786px" src="Infinite%20List%2078d28736a0d4445eb913988dce1a3d48/Untitled%201.png"/></a></figure><p id="e404d87c-c4fd-4631-be3f-7e6ca8e02a41" class=""><code>odds</code> is an instance of <code>InfiniteList</code>, with two fields, <code>head</code> and <code>tail</code>, each pointing to an instance of <code>Producer&lt;T&gt;</code>. The two instances of <code>Producer&lt;T&gt;</code> capture the local variable <code>this </code>and <code>mapper</code>of the method <code>map</code>. <code>mapper</code>refers to an instance of <code>Transformer&lt;T, T&gt;</code>. Since the method <code>map</code> of <code>evens </code>is called, the <code>this</code> reference refers to the object <code>evens</code>.</p><figure id="7fd2bb32-967a-4f4b-9115-abd8202389fd" class="image"><a href="Infinite%20List%2078d28736a0d4445eb913988dce1a3d48/Untitled%202.png"><img style="width:889px" src="Infinite%20List%2078d28736a0d4445eb913988dce1a3d48/Untitled%202.png"/></a></figure><ul id="f19162c7-97b3-4520-869a-c39cd46cbca1" class="bulleted-list"><li style="list-style-type:disc">when we call <code>altEvens.head()</code>. This method leads to the call <code>this.head().produce()</code>, where <code>this</code> refers to <code>altEvens</code>. The call  to  <code>produce</code>  invoked  <code>mapper.transform(this.head.produce())</code>  of the producer labelled 1 in the figure below. This leads to <code>this.head.produce()</code> of this producer being called. Within this producer, <code>this</code> refers to <code>odds</code>, and so  <code>this.head.produce()</code>  invoked  <code>mapper.transform(this.head.produce())</code> of the producer labelled 2. Now, <code>this</code> refers to <code>evens</code>, and <code>this.head.produce()</code> causes the producer <code>() -&gt; init</code> (labelled 3) to produce 0.</li></ul><ul id="bc43bd4d-d5d7-47d1-878b-e4cae519ad00" class="bulleted-list"><li style="list-style-type:disc">The execution now returns to the invocation of  <code>mapper.transform(this.head.produce())</code> and call <code>mapper.transform(0)</code>
  (labelled 4). This returns the value 1, which we pass into the <code>mapper.transform(1)</code>
 (labelled 5). The <code>mapper</code>is <code>x -&gt; x * 2 </code>so we have the result 2, which we return from <code>altEvens.head()</code></li></ul><ul id="b070769a-3c31-4fa1-95d5-305a3d3db1c0" class="bulleted-list"><li style="list-style-type:disc">The call to <code>head()</code> is the trigger that causes the chain of producers to produce a value.</li></ul><pre id="47f03c76-14e7-48dc-8762-228e03801e3d" class="code code-wrap"><code>// wrong
public InfiniteList&lt;T&gt; filter(BooleanCondition&lt;? super T&gt; cond) {
    if (cond.test(this.head())) {
      return new InfiniteList&lt;&gt;(this.head, () -&gt; this.tail().filter(cond));
    }
    return this.tail().filter(cond);
}

// The cond.test() above is eager 

public T head() {
    T h = this.head.produce();
    return h == null ? this.tail.produce().head() : h;  
  }

  public InfiniteList&lt;T&gt; tail() {
    T h = this.head.produce();
    return h == null ? this.tail.produce().tail() : this.tail.produce();  
  }

// THe method above is to skip any null value

public InfiniteList&lt;T&gt; filter(BooleanCondition&lt;? super T&gt; cond) {
    Producer&lt;T&gt; newHead = () -&gt; cond.test(this.head()) ? this.head() : null;
    return new InfiniteList&lt;&gt;(newHead, () -&gt; this.tail().filter(cond));
}</code></pre><ul id="0dff1961-6f99-4c93-ab4a-a28eaf3af506" class="toggle"><li><details open=""><summary>Practice #1</summary><p id="67343c2b-e70f-4f7f-abec-0f1759092a53" class="">Consider the class <code>EagerList&lt;T&gt;</code> defined in the notes.</p><p id="92ff4e78-f952-4204-a3f7-a10257b812e9" class="">How many times will the lambda expression <code>x -&gt; x + 1</code> be evaluated if the code below is executed?</p><pre id="2039bf85-c45a-4127-91fd-d47f3a44374e" class="code code-wrap"><code>EagerList.iterate(0, x -&gt; x &lt; 10, x -&gt; x + 1).get(5);</code></pre><p id="7c6d11b0-a850-4eb1-bb9f-4028d672fc43" class=""><strong><strong><strong><strong><strong><strong><strong>Answer: 10, the </strong></strong></strong></strong></strong></strong></strong><code><strong><strong><strong><strong><strong><strong><strong>EagerList</strong></strong></strong></strong></strong></strong></strong></code><strong><strong><strong><strong><strong><strong><strong> will evaluate all the list first before the </strong></strong></strong></strong></strong></strong></strong><code><strong><strong><strong><strong><strong><strong><strong>get</strong></strong></strong></strong></strong></strong></strong></code><strong><strong><strong><strong><strong><strong><strong> executes</strong></strong></strong></strong></strong></strong></strong></p></details></li></ul><ul id="f5501df5-807d-4982-90be-ebb2c8008482" class="toggle"><li><details open=""><summary>Practice #2</summary><p id="cd059663-c4f8-4c66-a6b1-4ab6c23a5904" class="">Consider the class <code>EagerList&lt;T&gt;</code> in the notes. What would the following statement return?</p><pre id="06d3a03e-927f-4b87-9b85-bc0a1214edf7" class="code code-wrap"><code>EagerList
  .iterate(3, i -&gt; i &lt; 100, i -&gt; i + 2)
  .map(i -&gt; i + 1)
  .filter(i -&gt; i % 3 != 0)
  .get(2);</code></pre><p id="ecb8a608-28ca-4d93-a626-fdd0b232a882" class=""><strong><strong><strong><strong><strong><strong><strong><strong><strong>Answer : 10, </strong></strong></strong></strong></strong></strong></strong></strong></strong>9 + 1 is not divisible by 3</p><p id="fc127d91-3991-4e60-805c-68e3230372c0" class="">
</p><p id="710f87df-3fbd-4d4d-8e27-fd4fb68ddb22" class="">
</p></details></li></ul><ul id="21061ab3-0c69-435f-a5e1-5173a6dc11de" class="toggle"><li><details open=""><summary>Practice #3</summary><p id="73cee2c9-4250-4684-a790-50fcdb87d316" class="">Consider the class <code>EagerList&lt;T&gt;</code> in the notes. What would the following statement return?</p><pre id="aef41177-5fd3-4288-81f4-af5225b3810f" class="code code-wrap"><code>EagerList
  .iterate(3, i -&gt; i &lt; 100, i -&gt; i + 2)
  .filter(i -&gt; i % 3 != 0)
  .filter(i -&gt; i % 5 != 0)
  .map(i -&gt; i * 10)
  .get(2);</code></pre><p id="825c8c4e-7e23-4891-be95-42c33d3974df" class=""><strong><strong><strong>Answer: 130</strong></strong></strong></p></details></li></ul><ul id="b88acabe-3bd7-419c-a32c-adeed764b335" class="toggle"><li><details open=""><summary>Practice #4</summary><figure id="b6cfaf13-3b13-41b4-992a-ede3bceb7e18" class="image"><a href="Infinite%20List%2078d28736a0d4445eb913988dce1a3d48/Untitled%203.png"><img style="width:648px" src="Infinite%20List%2078d28736a0d4445eb913988dce1a3d48/Untitled%203.png"/></a></figure></details></li></ul><ul id="1d9c3623-fa6b-4fe2-ac06-95fe418cfb11" class="toggle"><li><details open=""><summary>Practice #5</summary><p id="e4f77f88-4a19-412f-b8d9-3d34ff487a7e" class="">Consider the class <code>EagerList&lt;T&gt;</code> in the notes.  Suppose we have two methods <code>f</code> and <code>g</code> and an <code>EagerList&lt;T&gt;</code> <code>list</code>.  Assume that <code>f</code> and <code>g</code> are pure functions.</p><p id="b6d37df5-35cf-4b17-b837-888f794a9db3" class="">Then,</p><pre id="816e1731-6fc8-467f-acf2-a46e4b0fdd69" class="code code-wrap"><code>list.map(x -&gt; f(x)).map(x -&gt; g(x))</code></pre><p id="05aec644-8928-469b-bf83-ee09e1aceeec" class="">is equivalent to:</p><p id="6d40ed68-3ecc-48db-bea1-a5ac9e750bcd" class="">✅ <code>list.map(x -&gt; g(f(x)))</code> This means we apply f then g</p><p id="8a4e6175-60db-4195-acec-5fe854b4f98a" class="">❌ <code>list.map(x -&gt; g(x)).map(x -&gt; f(x))</code> the order is wrong so might not give the same result</p><p id="d48cdb88-2d4d-4df2-89de-5ed659c2a9d0" class="">❌ <code>list.map(x -&gt; f(g(x)))</code> same order is wrong</p></details></li></ul><ul id="8722536d-893e-40f7-8b8f-9d80aff54651" class="toggle"><li><details open=""><summary>Practice #6</summary><p id="70901712-3238-441a-b9e8-218e860b2a64" class="">Consider the class <code>InfiniteList&lt;T&gt;</code> defined in the notes.</p><p id="9b3145e1-1d5b-4935-90de-2e79213f8ad2" class="">How many times will the lambda expression <code>x -&gt; x + 1</code> be evaluated if the code below is executed?</p><pre id="41cf6e4e-5064-4c93-b17f-3cb947ec98aa" class="code code-wrap"><code>InfiniteList.iterate(0, x -&gt; x + 1).get(5);</code></pre><p id="f4920e84-1354-4783-a55d-18593ad3129b" class=""><strong><strong><strong><strong><strong><strong><strong><strong><strong>Answer: 5</strong></strong></strong></strong></strong></strong></strong></strong></strong></p></details></li></ul><ul id="f5577547-0053-4f3c-ae6a-e830688c6647" class="toggle"><li><details open=""><summary>Practice #7</summary><p id="6eaadd3b-c934-46a9-8eb5-6cff85dd97dd" class="">The method iterate is implemented as follows in the notes:</p><pre id="12f8d4fc-1a02-46ab-9d0b-d5b3b9e39c1f" class="code code-wrap"><code>  public static &lt;T&gt; InfiniteList&lt;T&gt; iterate(T init, Transformer&lt;T, T&gt; next) {
    return new InfiniteList(() -&gt; init,
        () -&gt; this.iterate(next.transform(init), next));
  }
</code></pre><p id="276083d8-8b67-4c75-988f-28ea1c41a759" class="">Consider the following alternative implementation instead:</p><pre id="d279101c-2a88-4ed0-86de-6ec5ede59625" class="code code-wrap"><code>  public static &lt;T&gt; InfiniteList&lt;T&gt; iterate(T init, Transformer&lt;T, T&gt; next) {
    InfiniteList&lt;T&gt; tail = this.iterate(next.transform(init), next));
    return new InfiniteList(() -&gt; init, () -&gt; tail);
  }
</code></pre><p id="3aae8559-0f0a-4856-93e4-c1ba6f9ba5d2" class="">Is there a difference in the two implementation above, and if there is, what is the difference?</p><p id="878c970a-6eb9-468d-b865-ad84e6b41f4b" class="">❌ There is no difference.</p><p id="e76a309e-ffb4-4be0-9e9f-6404f2dae653" class="">❌ The alternative implementation is more efficient.</p><p id="d2569370-bf4a-4f06-88ef-d353080d4f55" class="">✅ The alternative implementation would never terminate. ⇒ because <code>next</code> is not wrapped in a lambda expression so it will be automatically evaluated</p><p id="6491dd6b-a749-43ab-83b6-d7d240221d7a" class="">❌ The alternative implmenetation is lazier.</p></details></li></ul><ul id="ac0e3164-cf64-4f24-947e-5ef924519b24" class="toggle"><li><details open=""><summary>Question #1 Why does the <code>generate()</code> method has a parameter type of <code>Supplier&lt;? extends T&gt;</code>. Why is there an upper bounded wildcard.</summary><p id="2d2b942b-beaf-46fb-8f26-08052c04064f" class=""><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>Answer: It means that the </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>Supplier</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong> passed to the </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>generate</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong> method can be more permissive and is able to store and return objects that are either of type </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>T</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong> or a subtype of </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>T</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code></p></details></li></ul><ul id="47701547-3413-417f-ac4e-670f92b049f6" class="toggle"><li><details open=""><summary>Question #2 What does it mean that the <code>InfiniteList</code> in Lab 7 is immutable</summary><p id="6d73ad84-0179-4335-b5b5-720de8b2fdd3" class=""><strong>Answer: This means that the </strong><strong><code>InfiniteList</code></strong><strong> pipeline must be immutable and therefore the resulting pipeline can be used multiple times unlike the mutable one  </strong></p><p id="f42bc9dd-6022-4308-84de-105094ce1e30" class="">
</p></details></li></ul><p id="8e746a99-0df2-4000-a786-deaeb6005bae" class="">
</p></div></article></body></html>